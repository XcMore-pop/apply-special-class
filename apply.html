<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>สมัครเรียน | ห้องเรียนพิเศษ</title>
  <style>
    :root{--bg:#0b1220;--card:#121b2e;--line:#223252;--txt:#e6eefc;--muted:#a9b7d3;--brand:#22c55e;}
    *{box-sizing:border-box} body{margin:0;font-family:system-ui,-apple-system,"Sarabun",sans-serif;background:linear-gradient(180deg,#071022,#0b1220);color:var(--txt)}
    .wrap{max-width:980px;margin:0 auto;padding:22px}
    .card{border:1px solid var(--line);border-radius:16px;background:rgba(255,255,255,.03);padding:16px}
    .row{display:grid;grid-template-columns:repeat(12,1fr);gap:12px}
    .col6{grid-column:span 12} @media(min-width:860px){.col6{grid-column:span 6}}
    label{display:block;color:var(--muted);font-size:13px;margin:10px 0 6px}
    input,select,textarea{width:100%;padding:12px 12px;border-radius:12px;border:1px solid var(--line);background:rgba(0,0,0,.15);color:var(--txt);outline:none}
    textarea{min-height:90px;resize:vertical}
    .btns{display:flex;gap:10px;flex-wrap:wrap;margin-top:14px}
    button,a.btn{padding:12px 14px;border-radius:12px;border:1px solid var(--line);background:rgba(255,255,255,.02);color:var(--txt);cursor:pointer;text-decoration:none}
    button.primary{border-color:rgba(34,197,94,.55);background:rgba(34,197,94,.14)}
    .hint{color:var(--muted);font-size:13px;margin-top:8px}
  </style>
</head>
<body>
  <div class="wrap">
    <a class="btn" href="index.html">← กลับหน้าแรก</a>
    <h2 style="margin:14px 0 10px">ใบสมัครออนไลน์</h2>

    <div class="card">
      <form id="f">
        <div class="row">
          <div class="col6">
            <label>ชื่อ-สกุลนักเรียน</label>
            <input required name="studentName" placeholder="เช่น ธนโยธิน ใจดี" />
          </div>
          <div class="col6">
            <label>เลขบัตรประชาชน/เลขนักเรียน</label>
            <input required name="studentId" inputmode="numeric" placeholder="ตัวเลข" />
          </div>

          <div class="col6">
            <label>ระดับชั้นที่สมัคร</label>
            <select required name="grade">
              <option value="">-- เลือก --</option>
              <option>ม.1 ห้องพิเศษ</option>
              <option>ม.4 ห้องพิเศษ</option>
            </select>
          </div>
          <div class="col6">
            <label>โปรแกรม</label>
            <select required name="program">
              <option value="">-- เลือก --</option>
              <option>SMTE</option>
              <option>EP</option>
              <option>Gifted</option>
            </select>
          </div>

          <div class="col6">
            <label>เบอร์โทร</label>
            <input required name="phone" inputmode="tel" placeholder="0xxxxxxxxx" />
          </div>
          <div class="col6">
            <label>อีเมล (ถ้ามี)</label>
            <input name="email" type="email" placeholder="example@email.com" />
          </div>

          <div class="col6">
            <label>ชื่อผู้ปกครอง</label>
            <input required name="parentName" placeholder="ชื่อ-สกุลผู้ปกครอง" />
          </div>
          <div class="col6">
            <label>เบอร์ผู้ปกครอง</label>
            <input required name="parentPhone" inputmode="tel" placeholder="0xxxxxxxxx" />
          </div>

          <div class="col6">
            <label>อัปโหลด ปพ.1 / ใบรับรองผลการเรียน</label>
            <input required name="doc1" type="file" accept=".pdf,.jpg,.jpeg,.png" />
          </div>
          <div class="col6">
            <label>อัปโหลด รูปถ่ายนักเรียน</label>
            <input required name="photo" type="file" accept=".jpg,.jpeg,.png" />
          </div>

          <div class="col6" style="grid-column:span 12">
            <label>หมายเหตุ</label>
            <textarea name="note" placeholder="ถ้ามี"></textarea>
          </div>
        </div>

        <div class="btns">
          <button class="primary" type="submit">✅ ส่งใบสมัคร</button>
          <a class="btn" href="status.html">ไปเช็คสถานะ</a>
        </div>
        <div class="hint">* เดโมนี้จะสร้างเลขใบสมัครและเก็บไว้ในเครื่อง (localStorage) ยังไม่ได้ส่งเข้าฐานข้อมูลจริง</div>
      </form>
    </div>
  </div>

  <script>
    const f = document.getElementById('f');

    function makeAppId(){
      const t = new Date();
      const y = t.getFullYear();
      const m = String(t.getMonth()+1).padStart(2,'0');
      const d = String(t.getDate()).padStart(2,'0');
      const r = Math.floor(Math.random()*9000)+1000;
      return `APP-${y}${m}${d}-${r}`;
    }

    f.addEventListener('submit', (e)=>{
      e.preventDefault();
      const fd = new FormData(f);

      const appId = makeAppId();
      const payload = {
        appId,
        studentName: fd.get('studentName'),
        studentId: fd.get('studentId'),
        grade: fd.get('grade'),
        program: fd.get('program'),
        phone: fd.get('phone'),
        email: fd.get('email') || '',
        parentName: fd.get('parentName'),
        parentPhone: fd.get('parentPhone'),
        note: fd.get('note') || '',
        status: 'รอตรวจเอกสาร',
        createdAt: new Date().toISOString()
      };

      localStorage.setItem('latestApplication', JSON.stringify(payload));
      localStorage.setItem('latestApplicationId', appId);

      window.location.href = `success.html`;
    });
  </script>
</body>
</html>
